<launch>
    <rosparam file="$(find sirius_description)/config/controllers.yaml" command="load"/>
    <rosparam file="$(find sirius_description)/config/hardware.yaml" command="load"/>   

    <remap from="/sirius/controller/wheels/cmd_vel" to="/cmd_vel"/>
    <remap from="/sirius/controller/wheels/odom" to="/odom"/>

    <node name="sirius_control_loop" pkg="sirius_control_loop" type="sirius_control_loop" output="screen"/>
    <node name="controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen" ns="/"
        args="
             /sirius/controller/wheels_left_state
             /sirius/controller/wheels_right_state
             /sirius/controller/wheels
    "/>
    
    <node name="roboclaw_wheels_left" pkg="roboclaw_driver" type="driver.py" output="screen">
        <remap from="/roboclaw_wheels_left/motor1/joint_state" to="/wheels_left/roboclaw/motor1/joint_state"/>
        <remap from="/roboclaw_wheels_left/motor1/set_joint_state" to="/wheels_left/roboclaw/motor1/set_joint_state"/>
        <remap from="/roboclaw_wheels_left/motor2/joint_state" to="/wheels_left/roboclaw/motor2/joint_state"/>
        <remap from="/roboclaw_wheels_left/motor2/set_joint_state" to="/wheels_left/roboclaw/motor2/set_joint_state"/>
        <remap from="/roboclaw_wheels_left/loop_rate" to="/sirius/controller/wheels/publish_rate"/>
    </node>
    
    <node name="roboclaw_wheels_right" pkg="roboclaw_driver" type="driver.py" output="screen">
        <remap from="/roboclaw_wheels_right/motor1/joint_state" to="/wheels_right/roboclaw/motor1/joint_state"/>
        <remap from="/roboclaw_wheels_right/motor1/set_joint_state" to="/wheels_right/roboclaw/motor1/set_joint_state"/>
        <remap from="/roboclaw_wheels_right/motor2/joint_state" to="/wheels_right/roboclaw/motor2/joint_state"/>
        <remap from="/roboclaw_wheels_right/motor2/set_joint_state" to="/wheels_right/roboclaw/motor2/set_joint_state"/>
        <remap from="/roboclaw_wheels_right/loop_rate" to="/sirius/controller/wheels/publish_rate"/>
    </node>
</launch>