<launch>
    <arg name="message_rate" default="1.0" />
    <arg name="input_frame" default="camera_frame" />
    <arg name="output_frame" default="manip_frame" />
    <arg name="map_frame" default="map_frame" />
    <arg name="info_topic" default="/camera_info" />
    <arg name="stream_topic" default="/camera" />

    <node name="fake_camera" pkg="panel_visualization" type="fake_camera.py" output="screen">
        <param name="message_rate" value="$(arg message_rate)" />
        <param name="frame_id" value="$(arg input_frame)" />
        <param name="info_topic" value="$(arg info_topic)" />
        <param name="stream_topic" value="$(arg stream_topic)" />
    </node>

    <node name="aruco_detect" pkg="aruco_detect" type="aruco_detect">
        <param name="dictionary" value="0" /> <!-- DICT_4X4_50 -->
        <param name="publish_images" value="true" />
        <param name="fiducial_len" value="0.14" /> <!-- real size in steam: 0.023 -->
    </node>

    <node name="static_transform_publisher_0" pkg="tf2_ros" type="static_transform_publisher"
        args="0 0 0 -0.5 -0.5 0.5 0.5 $(arg output_frame) $(arg input_frame)" />

    <node name="static_transform_publisher_1" pkg="tf2_ros" type="static_transform_publisher"
        args="0 0 0 0 0 0 1 $(arg map_frame) $(arg output_frame)" />

    <node name="fiducial_slam" pkg="fiducial_slam" type="fiducial_slam">
        <param name="map_file" value="$(find panel_visualization)/config/map.txt" />
        <param name="map_frame" value="$(arg map_frame)" />
        <param name="base_frame" value="$(arg output_frame)" />
        <param name="odom_frame" value="" /> <!-- ignore odom -->
    </node>

    <node name="rviz" pkg="rviz" type="rviz" output="screen"
        args="-d $(find panel_visualization)/config/test_config.rviz" />

    <!-- TEST node -->
    <!-- <node name="image_receiver" pkg="panel_visualization" type="image_receiver.py"
        output="screen">
        <param name="message_rate" value="$(arg message_rate)" />
        <param name="stream_topic" value="$(arg stream_topic)" />
    </node> -->
</launch>